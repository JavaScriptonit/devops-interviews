# Список вопросов:

1. ## Что за последние 2 места работы было самым интеерсным и что больше нравится ?
Если Kubernetes - helm и деплои/администрирование/писать операторы/писать автоматизацию чтобы ставить мастера и воркеры/разбирать исходный код?

2. ## Что такое infrastructure as code?
```
"Infrastructure as Code" (IaC) - это подход к управлению инфраструктурой IT-систем с использованием программного кода. Вместо ручного настройки серверов, сетей и других инфраструктурных ресурсов, инженеры описывают всю необходимую инфраструктуру в виде кода, который затем может быть автоматически развернут и управляем с использованием инструментов автоматизации.

Основные принципы Infrastructure as Code включают в себя:

1. Декларативное описание инфраструктуры: Инженеры описывают желаемое состояние инфраструктуры (например, какие серверы должны быть развернуты, какие настройки сети нужны и т.д.) в виде декларативного кода, вместо того, чтобы описывать шаги, необходимые для достижения этого состояния.

2. Использование инструментов автоматизации: Для реализации Infrastructure as Code используются инструменты автоматизации, такие как Ansible, Terraform, Chef, Puppet, CloudFormation, Azure Resource Manager и другие. Эти инструменты позволяют развертывать, настраивать и управлять инфраструктурой с использованием кода.

3. Версионирование и контроль изменений: Код, описывающий инфраструктуру, может быть хранен в системе контроля версий, что позволяет отслеживать изменения, вносимые в инфраструктуру, и возвращаться к предыдущим версиям в случае необходимости.

Преимущества подхода Infrastructure as Code включают повышение скорости развертывания инфраструктуры, повышение надежности и согласованности настроек, а также облегчение масштабирования и управления инфраструктурой.

IaC является ключевым элементом DevOps-практик, так как позволяет автоматизировать процессы управления инфраструктурой и интегрировать их в цикл непрерывной поставки (CI/CD).
```

3. ## Что такое Terraform и что делал на нём?

4. ## Настраивал ли RBAC внутри? ec2? subnet? vpc?

Terraform модуль для создания RBAC-правил - https://habr.com/ru/companies/nixys/articles/649663/
```
Управление доступом на основе ролей (англ. Role Based Access Control, RBAC) 
Начиная с Kubernetes 1.6, RBAC-политики включены по умолчанию
Раньше нам приходилось вручную создавать подобные политики, сервисные аккаунты и пользователей

Данный модуль позволяет создавать сервисные аккаунты и пользователей, а затем генерировать готовые конфигурационные файлы (kubeconfig) для них
Также при помощи данного модуля можно создавать роли, кластерные роли и привязывать их к определенным сервисным аккаунтам, пользователям или группам.
Модуль можно найти в нашем GitHub репозитории - https://github.com/nixys/nxs-k8s-rbac-creator

В этом примере создается роль role-1 в default окружении со следующими правами:
apiVersion: rbac.authorization.k8s.io/v1
kind: Role

Также создается кластерная роль cluster-role-1 со следующими правами:
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole

и cluster-role-2 со следующими правами:
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole

Дополнительно создаются сервисные аккаунты sa-1 в окружении kube-system и sa-2 в окружении default.
Список пользователей для создания берется из поля users в переменной bindings.
То есть в данном случае будут созданы 2 пользователя user-1 и user-2 в группах group-1 и group-2 соответственно.
Также будут созданы 2 RoleBinding cluster-role-2-prefix-1-cluster-role:
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding

и role-1-prefix-1-role следующего вида:
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding

Также будет создан ClusterRoleBinding (соответствует количеству элементов в списке cluster_roles, если type = cluster_role_binding) cluster-role-1-prefix-2:
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding


Данный модуль помог повысить нашу эффективность. Раньше мы могли тратить от 20 до 60 минут на создание RBAC политик. Сейчас же на это уходит от 5 до 10 минут. 
Как правило для проектов мы используем одни и те же роли и кластерные роли. 
То есть можно повторно использовать зараннее созданные файлы с заполненными переменными.
```

K8s инфра в Terraform:
```
https://habr.com/ru/companies/nixys/articles/721404/
Решение — разбиваем конфигурационные файлы по типу описываемых компонентов, т. е. есть главный файл main.tf, где мы объявим провайдера и пропишем доступы к облаку. 

my_project/
├── k8s
│   ├── cluster.tf
│   ├── main.tf
│   ├── node_group.tf
│   ├── service_account.tf
└── network
    ├── external_ip.tf
    ├── main.tf
    ├── security_group.tf
    └── vpc.tf
```

5. ## Что такое модуль Terraform?

1 мая 2023 г. Модули Terraform — это готовые наборы файлов с настройками для облачных сервисов, которые упрощают работу DevOps-инженеров. Также модули помогают избегать дублирования кода. Модули Terraform для сервисов Yandex Cloud уже доступны на GitHub.

6. ## Что такое state Terraform и где его лучше хранить?

Состояние Terraform описывает текущую развернутую инфраструктуру и хранится в файлах с расширением . tfstate . Файл состояния создается после развертывания инфраструктуры и может быть сразу загружен в Object Storage. Загруженный файл состояния будет обновляться после изменений созданной инфраструктуры.

Этот файл используется для отслеживания метаданных и для сопоставления фактических ресурсов с конфигурацией.

По умолчанию этот файл состояния будет находиться локально в папке ваших проектов с именем terraform.tfstate.

Рекомендуется хранить состояния Terraform в высокодоступном удаленном хранилище данных, например, Terraform Cloud, HashiCorp Consul, Amazon S3, Google Cloud Storage (GCS):

```
# Backend
#terraform {
#  backend "local" {
#    path = "terraform.tfstate"
#  }
#}

terraform {
  backend "consul" {
    address  = "consul.example.com:8500"
    scheme   = "http"
    path     = "tf/terraform.tfstate"
    lock     = true
    gzip     = false
  }
}
```

7. ## Назвать все команды из 2ух букв:
```
ls, ps, cd, mw, rm, ln, lp, df, du, fg, ip, su, vi, cp, mc
```

8. ## Что такое код выхода и какие знаешь?
```
1	разнообразные ошибки
2	согласно документации к Bash -- неверное использование встроенных команд
126	вызываемая команда не может быть выполнена
127	"команда не найдена"
128	неверный аргумент команды exit
128+n	фатальная ошибка по сигналу "n"
130	завершение по Control-C
255*	код завершения вне допустимого диапазона
```

9. ## Приходит алерт, что на диске закончилось место. Идем на сервер и видим 2 больших файла du -sh показывает террабайт. что это может быть?
1. Ребут
2. Проверка mount /etc/fstab - sudo mount -a
3. 
