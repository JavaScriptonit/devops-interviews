# Список вопросов:
## Собеседование со СберОбразованием:
https://hh.ru/vacancy/88499914?hhtmFrom=chat


1. ## Что за последние 2 места работы было самым интеерсным и что больше нравится?
Если Kubernetes - helm и деплои/администрирование/писать операторы/писать автоматизацию чтобы ставить мастера и воркеры/разбирать исходный код?

2. ## Что такое infrastructure as code?
```
"Infrastructure as Code" (IaC) - это подход к управлению инфраструктурой IT-систем с использованием программного кода. Вместо ручного настройки серверов, сетей и других инфраструктурных ресурсов, инженеры описывают всю необходимую инфраструктуру в виде кода, который затем может быть автоматически развернут и управляем с использованием инструментов автоматизации.

Основные принципы Infrastructure as Code включают в себя:

1. Декларативное описание инфраструктуры: Инженеры описывают желаемое состояние инфраструктуры (например, какие серверы должны быть развернуты, какие настройки сети нужны и т.д.) в виде декларативного кода, вместо того, чтобы описывать шаги, необходимые для достижения этого состояния.

2. Использование инструментов автоматизации: Для реализации Infrastructure as Code используются инструменты автоматизации, такие как Ansible, Terraform, Chef, Puppet, CloudFormation, Azure Resource Manager и другие. Эти инструменты позволяют развертывать, настраивать и управлять инфраструктурой с использованием кода.

3. Версионирование и контроль изменений: Код, описывающий инфраструктуру, может быть хранен в системе контроля версий, что позволяет отслеживать изменения, вносимые в инфраструктуру, и возвращаться к предыдущим версиям в случае необходимости.

Преимущества подхода Infrastructure as Code включают повышение скорости развертывания инфраструктуры, повышение надежности и согласованности настроек, а также облегчение масштабирования и управления инфраструктурой.

IaC является ключевым элементом DevOps-практик, так как позволяет автоматизировать процессы управления инфраструктурой и интегрировать их в цикл непрерывной поставки (CI/CD).
```

3. ## Что такое Terraform и что делал на нём?

4. ## Настраивал ли RBAC внутри? ec2? subnet? vpc?

Terraform модуль для создания RBAC-правил - https://habr.com/ru/companies/nixys/articles/649663/
```
Управление доступом на основе ролей (англ. Role Based Access Control, RBAC) 
Начиная с Kubernetes 1.6, RBAC-политики включены по умолчанию
Раньше нам приходилось вручную создавать подобные политики, сервисные аккаунты и пользователей

Данный модуль позволяет создавать сервисные аккаунты и пользователей, а затем генерировать готовые конфигурационные файлы (kubeconfig) для них
Также при помощи данного модуля можно создавать роли, кластерные роли и привязывать их к определенным сервисным аккаунтам, пользователям или группам.
Модуль можно найти в нашем GitHub репозитории - https://github.com/nixys/nxs-k8s-rbac-creator

В этом примере создается роль role-1 в default окружении со следующими правами:
apiVersion: rbac.authorization.k8s.io/v1
kind: Role

Также создается кластерная роль cluster-role-1 со следующими правами:
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole

и cluster-role-2 со следующими правами:
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole

Дополнительно создаются сервисные аккаунты sa-1 в окружении kube-system и sa-2 в окружении default.
Список пользователей для создания берется из поля users в переменной bindings.
То есть в данном случае будут созданы 2 пользователя user-1 и user-2 в группах group-1 и group-2 соответственно.
Также будут созданы 2 RoleBinding cluster-role-2-prefix-1-cluster-role:
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding

и role-1-prefix-1-role следующего вида:
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding

Также будет создан ClusterRoleBinding (соответствует количеству элементов в списке cluster_roles, если type = cluster_role_binding) cluster-role-1-prefix-2:
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding


Данный модуль помог повысить нашу эффективность. Раньше мы могли тратить от 20 до 60 минут на создание RBAC политик. Сейчас же на это уходит от 5 до 10 минут. 
Как правило для проектов мы используем одни и те же роли и кластерные роли. 
То есть можно повторно использовать зараннее созданные файлы с заполненными переменными.
```

K8s инфра в Terraform:
```
https://habr.com/ru/companies/nixys/articles/721404/
Решение — разбиваем конфигурационные файлы по типу описываемых компонентов, т. е. есть главный файл main.tf, где мы объявим провайдера и пропишем доступы к облаку. 

my_project/
├── k8s
│   ├── cluster.tf
│   ├── main.tf
│   ├── node_group.tf
│   ├── service_account.tf
└── network
    ├── external_ip.tf
    ├── main.tf
    ├── security_group.tf
    └── vpc.tf
```

5. ## Что такое модуль Terraform?

1 мая 2023 г. Модули Terraform — это готовые наборы файлов с настройками для облачных сервисов, которые упрощают работу DevOps-инженеров. Также модули помогают избегать дублирования кода. Модули Terraform для сервисов Yandex Cloud уже доступны на GitHub.

6. ## Что такое state Terraform и где его лучше хранить?

Состояние Terraform описывает текущую развернутую инфраструктуру и хранится в файлах с расширением . tfstate . Файл состояния создается после развертывания инфраструктуры и может быть сразу загружен в Object Storage. Загруженный файл состояния будет обновляться после изменений созданной инфраструктуры.

Этот файл используется для отслеживания метаданных и для сопоставления фактических ресурсов с конфигурацией.

По умолчанию этот файл состояния будет находиться локально в папке ваших проектов с именем terraform.tfstate.

Рекомендуется хранить состояния Terraform в высокодоступном удаленном хранилище данных, например, Terraform Cloud, HashiCorp Consul, Amazon S3, Google Cloud Storage (GCS):

```
# Backend
#terraform {
#  backend "local" {
#    path = "terraform.tfstate"
#  }
#}

terraform {
  backend "consul" {
    address  = "consul.example.com:8500"
    scheme   = "http"
    path     = "tf/terraform.tfstate"
    lock     = true
    gzip     = false
  }
}
```

7. ## Назвать все команды из 2ух букв:
```
ls, ps, cd, mw, rm, ln, lp, df, du, fg, ip, su, vi, cp, mc
```

8. ## Что такое код выхода и какие знаешь?
```
1	разнообразные ошибки
2	согласно документации к Bash -- неверное использование встроенных команд
126	вызываемая команда не может быть выполнена
127	"команда не найдена"
128	неверный аргумент команды exit
128+n	фатальная ошибка по сигналу "n"
130	завершение по Control-C
255*	код завершения вне допустимого диапазона
```

9. ## Виртуалка. df -h /home/user1 показывает примонтированный диск на 10Гб из которых 5Гб занято. При создании файла - Ошибка: "No space left on device". Что это может быть?
    1. Ребут: `sudo reboot`
    2. Проверка mount /etc/fstab: `sudo mount -a`
    3. Проверить symbolic link and hard link: `ls -l`
        1. `find . -type l` - найти линки
        2. `readlink имя_символической_ссылки` -  узнать, на что указывает символическая ссылка
    4. Проверить кол-во свободных inodes: `df -T`
    Ответ: Проблема была из-за отсутствия свободных inodes на диске. 2 решения: добавить памяти на диск для увеличения кол-ва инод или изменить файловую систему.

10. ## Сети в Linux. Какие порты сейчас слушаются приложениями? Как проверить?
    1. `netstat -tuln` - позволяет отображать сетевую статистику, включая информацию о сетевых соединениях, прослушиваемых портах и другие сетевые детали
    2. `ss -tuln` - Socket Statistics, отобразит список TCP и UDP портов, которые в данный момент прослушиваются.

11. ## Что такое procfs?
    1. `ProcFS` — специальная файловая система, используемая в Linux, позволяет получить доступ к информации из ядра о системных процессах.
    2. `ps -ef` - выведет список всех запущенных на данный момент процессов:
    ```
    UID        PID  PPID  C STIME TTY          TIME CMD
    root         1     0  0 11:08 ?        00:00:04 init
    root         2     1  0 11:08 ?        00:00:00 [keventd]
    mbutcher  1219  1207  0 12:23 pty/s2   00:00:00 /bin/bash
    root         8     1  0 11:08 ?        00:00:00 [kjournald]
    ```

12. ## Описание файлов и директории из ProcFS:
```
/proc/PID/cmdline – аргументы командной строки (где PID – идентификатор процесса или self);
/proc/PID/environ – переменные окружения для данного процесса;
/proc/PID/status – статус процесса;
/proc/PID/fd – директория, содержащая символьные ссылки на каждый открытый файловый дескриптор;
/proc/cpuinfo – информация о процессоре (производитель, модель, поколение и т.п.);
/proc/cmdline – параметры, передаваемые ядру при загрузке;
/proc/uptime – количество секунд, прошедших с момента загрузки ядра и проведенных в режиме бездействия;
/proc/version – содержит информацию о версии ядра, компилятора и другую информацию, связанную с загруженным ядром.
/proc/sys/fs/file-max - показывает предел Max Open File Limit (обозначающий число одновременно открытых файлов)
/proc/sys/fs/file-nr - по порядку параметр выдает три значения: число открытых в данный момент файлов; число открытых, но не используемых файлов; максимальное число открытых файлов
```

13. ## Что такое "strace"?
    1. Утилита strace предназначена для отслеживания системных вызовов, которые выполняются процессом в операционной системе Linux. Она позволяет наблюдать взаимодействие между процессом и операционной системой, отслеживая системные вызовы, сигналы, чтение и запись файлов, а также другие операции ввода-вывода.
        1. `strace -p <PID>` - где <PID> - идентификатор процесса, который вы хотите отследить.

# Сети:

14. ## Что такое DNS?
    1. DNS в `k8s`: до version 1.11 - `kube-dns` и после version 1.11 - `CoreDNS`
        1. `resolv.conf`:
        ```
        nameserver 10.32.0.10
        search namespace.svc.cluster.local svc.cluster.local cluster.local
        options ndots:5
        ```
        2. Пример Kubernetes DNS Records:
        ```
        service.namespace.svc.cluster.local

        10.32.0.125.namespace.pod.cluster.local
        ```
        3. Configuration Options - `dnsConfig` option, Updating this config will rewrite a pod’s resolv.conf to enable the changes:
        ```
        apiVersion: v1
        kind: Pod
        metadata:
        namespace: example
        name: custom-dns
        spec:
        containers:
            - name: example
            image: nginx
        dnsPolicy: "None"
        dnsConfig:
            nameservers:
            - 203.0.113.44
            searches:
            - custom.dns.local
        ```
    2. Что такое `DNS`? Domain Name System, — система доменных имён. 
    ```
    IPv4: 82.202.175.68

    IPv6: 2a00:1450:4010:c08::66
    ```
    3. Типы записей в `DNS`:
    ```
    Основные типы ресурсных записей (Resource Records):

    A-запись — задает преобразование имени хоста в IP-адрес.
    MX-запись — определяет почтовый ретранслятор для доменного имени, т.е. узел, который обработает или передаст дальше почтовые сообщения, предназначенные адресату в указанном домене. При наличии нескольких MX-записей сначала происходит попытка доставить почту на ретранслятор с наименьшим приоритетом.
    NS-записи — определяют DNS-серверы, которые являются авторитативными для данной зоны.
    CNAME-запись — определяет отображение псевдонима в каноническое имя узла.
    SRV-запись — позволяет получить имя для искомой службы, а также протокол, по которому эта служба работает.
    TXT-запись — содержит общую текстовую информацию. Эти записи могут использоваться в любых целях, например, для указания месторасположения хоста.
    AAAA-запись — задает преобразование имени хоста в IPV6-адрес.
    SSHFP-запись — используется для хранения слепка ключей SSH в DNS.
    ```

15. ## На каком протоколе транспортного уровня работает DNS?

DNS использует TCP для передачи зоны и UDP в качестве имени и запрашивает обычный (основной) или обратный. UDP можно использовать для обмена небольшой информацией, тогда как протокол TCP должен использоваться для обмена данными размером более 512 байт.



# Продолжить с 28:54мин собеседования
