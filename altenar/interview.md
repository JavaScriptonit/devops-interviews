# Список вопросов:

## Собеседование с Altenar:

-----------------------

# Вопросы из записи в iCloud (Тех собес Altenar 1/1):
Ссылка на - Troubleshooting Scenarios (задания для DevOps Собеседований) https://sadservers.com/scenarios

# ОПЫТ:

## 1. Нужно развернуть инстансы MongoDB в Google Cluster. У нас есть 2 НП. 1 преэмтипал пулл и 2ой кор пулл. Задача: поды MongoDB шедулились только на определенном ноде пулле (кор пулл). Как технически решить эту задачу?

Для того чтобы развернуть инстансы MongoDB в Google Kubernetes Engine (GKE) и гарантировать, что они будут шедулироваться только на определенном ноде пуле (кор пулл), можно воспользоваться следующими шагами:

1. Создайте два Node Pool в вашем кластере GKE: один для преэмптивных экземпляров (преэмптив пулл) и другой для обычных экземпляров (кор пулл).

2. Настройте аннотации для Node Pool, чтобы указать, на каких узлах должны запускаться поды MongoDB. Например, вы можете добавить аннотацию к узлам в кор пулле:

```yaml
cloud.google.com/gke-nodepool: "core-pool"
```

3. В манифесте для развертывания MongoDB в кластере GKE, укажите селектор, чтобы поды MongoDB были шедулированы только на узлы с определенной аннотацией. Например:

```yaml
nodeSelector:
  cloud.google.com/gke-nodepool: core-pool
```

4. Примените манифест для развертывания MongoDB в вашем кластере GKE. Теперь поды MongoDB будут шедулироваться только на узлы в кор пулле, так как они соответствуют селектору.

Эти шаги позволят вам контролировать, на каких узлах вашего кластера GKE будут запускаться поды MongoDB, обеспечивая таким образом желаемое размещение и управление инстансами MongoDB.

1) **Node Pool**: В Google Kubernetes Engine (GKE) Node Pool - это группа узлов (нод), которая представляет собой подмножество узлов в вашем кластере GKE. Каждый Node Pool может иметь свои собственные характеристики, такие как тип машины, размер, автоскалирование и т. д.

2) **Преэмптивный пулл (Preemptible Pool)**: Преэмптивные экземпляры Google Cloud - это дешевые виртуальные машины, которые могут быть прерваны в любой момент Google. Преэмптивный пулл в GKE - это Node Pool, состоящий из преэмптивных экземпляров, которые могут быть выгодны для выполнения ненадежных задач или задач, которые могут быть перезапущены без потери данных.

3) **Кор пулл (Core Pool)**: Кор пулл в контексте GKE обычно означает основной пул узлов, который содержит обычные (не преэмптивные) экземпляры виртуальных машин.

4) Для шедулирования подов на конкретную ноду на физических серверах (нодах), если у вас нет прав на просмотр списка всех нод, можно воспользоваться аннотациями к нодам. В манифесте пода можно указать аннотацию, которая соответствует конкретной ноде, на которой вы хотите запустить под.

5) Пример с помощью Helm для создания пода на конкретной ноде с определенной аннотацией:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: my-pod
  annotations:
    node.alpha.kubernetes.io/ttl: "0"  # Аннотация для выбора ноды
spec:
  containers:
    - name: my-container
      image: nginx:latest
```

В этом примере, мы указали аннотацию `node.alpha.kubernetes.io/ttl: "0"`, которая поможет шедулировать под на конкретную ноду. После установки Helm чарта с таким манифестом, под будет запущен на ноде, соответствующей указанной аннотации.
## 2. 